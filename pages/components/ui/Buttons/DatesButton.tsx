import { useContext, memo } from 'react'
import { TouchableHighlight } from 'react-native';
import { CardsNavigationContext, type ContextType } from '../../../context/cards-navigation-context';
import { Svg, Path, Circle, G, Defs, Filter, FeFlood, FeColorMatrix, FeOffset, FeGaussianBlur, LinearGradient, FeBlend, Stop } from 'react-native-svg';

type ButtonProps = {
    type: keyof ContextType['states']; // 'friendState' | 'datesState' | 'matchesState'
};

const DatesButton: React.FC<ButtonProps> = ({ type }) => {
    const { states, setActiveButton } = useContext(CardsNavigationContext);

    return (
        <TouchableHighlight
            style={{ opacity: states[type] ? 1 : 0.5, backgroundColor: 'transparent' }}
            underlayColor="transparent"
            onPress={() => setActiveButton(type)}
        >
            {
                states[type] ? (
                    <Svg width="72" height="83" viewBox="0 0 72 83" fill="none">
                        <G filter="url(#filter0_d_5005_3314)">
                            <Circle cx="36" cy="36" r="26" fill="white" />
                        </G>
                        <Path d="M36 54L31 47C32.6329 47.3889 34.0479 47.7778 36.0008 47.7778C37.9531 47.7778 39.3687 47.3889 41 47L36 54Z" fill="orange" />
                        <Circle cx="36" cy="34" r="12" fill="orange" />
                        <Path d="M38.2348 31C39.7619 31 41 32.1464 41 33.56C41 35.8966 35.9999 39 35.9999 39C35.9999 39 31 36.0085 31 33.56C31 31.8 32.2381 31 33.7649 31C34.6846 31 35.497 31.4176 35.9999 32.057C36.5028 31.4176 37.3153 31 38.2348 31Z" fill="white" />
                        <Path d="M24.4375 81.182C22.9441 81.182 21.8055 80.79 21.0215 80.006C20.2375 79.2127 19.8455 77.99 19.8455 76.338C19.8455 74.7233 20.2188 73.5053 20.9655 72.684C21.7215 71.8627 22.8788 71.452 24.4375 71.452C24.9321 71.452 25.4315 71.5173 25.9355 71.648C26.4395 71.7693 26.9295 71.9327 27.4055 72.138V74.112C26.9201 73.7947 26.4535 73.566 26.0055 73.426C25.5575 73.286 25.1375 73.216 24.7455 73.216C24.1948 73.216 23.7281 73.314 23.3455 73.51C22.9628 73.706 22.6735 74.0327 22.4775 74.49C22.2815 74.9473 22.1835 75.5633 22.1835 76.338C22.1835 77.1127 22.2815 77.724 22.4775 78.172C22.6828 78.62 22.9815 78.942 23.3735 79.138C23.7748 79.3247 24.2648 79.418 24.8435 79.418C25.1888 79.418 25.5808 79.3527 26.0195 79.222C26.4581 79.0913 26.9201 78.8673 27.4055 78.55V80.524C27.0228 80.72 26.5561 80.8787 26.0055 81C25.4548 81.1213 24.9321 81.182 24.4375 81.182ZM29.0558 72.95V71.34H31.2118V72.95H29.0558ZM29.0978 81V74.014H31.1838L31.1978 81H29.0978ZM35.9597 81.28C35.1384 81.28 34.527 81.0887 34.1257 80.706C33.7244 80.314 33.5237 79.7633 33.5237 79.054V75.512H32.4877V73.916H33.5237V71.97H35.7077V73.916H37.2617V75.512H35.7077V78.788C35.7077 79.0307 35.759 79.2127 35.8617 79.334C35.9644 79.446 36.137 79.502 36.3797 79.502C36.7064 79.502 37.0004 79.404 37.2617 79.208V80.986C37.0564 81.098 36.8417 81.1727 36.6177 81.21C36.3937 81.2567 36.1744 81.28 35.9597 81.28ZM41.5749 81.21C40.9962 81.21 40.4736 81.14 40.0069 81C39.5402 80.8507 39.1669 80.6033 38.8869 80.258C38.6069 79.9033 38.4669 79.4133 38.4669 78.788C38.4669 78.1347 38.6722 77.612 39.0829 77.22C39.4936 76.8187 40.1329 76.618 41.0009 76.618C41.3649 76.618 41.7149 76.6647 42.0509 76.758C42.3962 76.8513 42.6902 76.9633 42.9329 77.094V76.646C42.9329 76.2167 42.7929 75.9087 42.5129 75.722C42.2422 75.526 41.8596 75.428 41.3649 75.428C40.9449 75.428 40.5249 75.5027 40.1049 75.652C39.6849 75.792 39.3536 75.9647 39.1109 76.17V74.322C39.3349 74.1727 39.7036 74.0327 40.2169 73.902C40.7396 73.7713 41.3136 73.706 41.9389 73.706C42.2096 73.706 42.5176 73.7387 42.8629 73.804C43.2176 73.86 43.5582 73.9767 43.8849 74.154C44.2116 74.322 44.4776 74.5693 44.6829 74.896C44.8976 75.2227 45.0049 75.652 45.0049 76.184L44.9909 79.53C44.9816 80.1367 44.6782 80.5707 44.0809 80.832C43.4836 81.084 42.6482 81.21 41.5749 81.21ZM40.5389 78.83C40.5389 79.11 40.6509 79.334 40.8749 79.502C41.1082 79.6607 41.3649 79.74 41.6449 79.74C42.1209 79.74 42.4522 79.7073 42.6389 79.642C42.8349 79.5767 42.9329 79.446 42.9329 79.25V78.158C42.5969 78.046 42.2376 77.99 41.8549 77.99C40.9776 77.99 40.5389 78.27 40.5389 78.83ZM48.9566 81.21C48.4526 81.21 48.0186 81.154 47.6546 81.042C47.3 80.9393 46.9686 80.8227 46.6606 80.692V78.858C46.9406 79.0633 47.2813 79.2593 47.6826 79.446C48.0933 79.6233 48.546 79.712 49.0406 79.712C49.3766 79.712 49.61 79.656 49.7406 79.544C49.8806 79.4227 49.9506 79.278 49.9506 79.11C49.9506 78.9513 49.8806 78.8253 49.7406 78.732C49.6006 78.6293 49.4186 78.5453 49.1946 78.48C48.9706 78.4147 48.7326 78.354 48.4806 78.298C48.1726 78.2327 47.874 78.1253 47.5846 77.976C47.3046 77.8173 47.0713 77.5933 46.8846 77.304C46.7073 77.0053 46.6186 76.6227 46.6186 76.156C46.6186 75.708 46.7073 75.33 46.8846 75.022C47.062 74.714 47.2953 74.4667 47.5846 74.28C47.874 74.0933 48.1866 73.9627 48.5226 73.888C48.8586 73.804 49.1853 73.7667 49.5026 73.776C50.0813 73.7947 50.5386 73.86 50.8746 73.972C51.2106 74.0747 51.5233 74.21 51.8126 74.378V76.016C51.4953 75.8387 51.178 75.6753 50.8606 75.526C50.5526 75.3673 50.198 75.288 49.7966 75.288C49.4326 75.288 49.1713 75.3487 49.0126 75.47C48.854 75.582 48.7746 75.7267 48.7746 75.904C48.7746 76.1747 48.8913 76.3613 49.1246 76.464C49.358 76.5667 49.6333 76.66 49.9506 76.744C50.184 76.8 50.4266 76.87 50.6786 76.954C50.9306 77.0287 51.164 77.1407 51.3786 77.29C51.5933 77.43 51.766 77.6307 51.8966 77.892C52.0366 78.1533 52.1066 78.4893 52.1066 78.9C52.0973 79.4693 51.9433 79.922 51.6446 80.258C51.346 80.594 50.9586 80.8367 50.4826 80.986C50.0066 81.1353 49.498 81.21 48.9566 81.21Z" fill="white" />
                        <Defs>
                            <Filter id="filter0_d_5005_3314" x="0" y="0" width="72" height="72" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                <FeFlood flood-opacity="0" result="BackgroundImageFix" />
                                <FeColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                <FeOffset />
                                <FeGaussianBlur stdDeviation="5" />
                                <FeColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 0.282353 0 0 0 0 0.407843 0 0 0 0.25 0" />
                                <FeBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5005_3314" />
                                <FeBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5005_3314" result="shape" />
                            </Filter>
                            <LinearGradient id="paint0_linear_5005_3314" x1="35.5733" y1="54" x2="35.6193" y2="46.9974" gradientUnits="userSpaceOnUse">
                                <Stop stop-color="#FF58A4" />
                                <Stop offset="1" stop-color="#FF6B86" />
                            </LinearGradient>
                            <LinearGradient id="paint1_linear_5005_3314" x1="36.032" y1="50.3744" x2="36.5598" y2="22.4771" gradientUnits="userSpaceOnUse">
                                <Stop offset="0.0426589" stop-color="#FF6B86" />
                                <Stop offset="0.979167" stop-color="#FFB03A" />
                            </LinearGradient>
                        </Defs>
                        <Circle cx="36" cy="36" r="28.5" stroke="#FFB1C7" />
                    </Svg>
                ) : (
                    <Svg width="72" height="83" viewBox="0 0 72 83" fill="none">

                        <G filter="url(#filter0_d_1609_6415)">
                            <Circle cx="36" cy="36" r="26" fill="white" />
                        </G>
                        <Path d="M36 54L31 47C32.6329 47.3889 34.0479 47.7778 36.0008 47.7778C37.9531 47.7778 39.3687 47.3889 41 47L36 54Z" fill="orange" />
                        <Circle cx="36" cy="34" r="12" fill="orange" />
                        <Path d="M38.2348 31C39.7619 31 41 32.1464 41 33.56C41 35.8966 35.9999 39 35.9999 39C35.9999 39 31 36.0085 31 33.56C31 31.8 32.2381 31 33.7649 31C34.6846 31 35.497 31.4176 35.9999 32.057C36.5028 31.4176 37.3153 31 38.2348 31Z" fill="white" />
                    </Svg>
                )
            }
        </TouchableHighlight>
    )
}

export default memo(DatesButton);
